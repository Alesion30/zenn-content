---
title: "Viteã§ä½œæˆã—ãŸReact+TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«TailwindCSS+Storybookã‚’å°å…¥ã™ã‚‹"
emoji: "ğŸ˜"
type: "tech"
topics: ["react", "storybook", "typescript", "tailwindcss", "vite"]
published: true
---

<!-- textlint-disable -->

# TL;DR

æœ¬è¨˜äº‹ã§ã¯ã€Viteã§ä½œæˆã—ãŸReact+TypeScriptãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã€TailwindCSSã¨Storybookã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšè©¦ã—ãŸã„äººã¯ã€ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’é©å½“ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ä½¿ã£ã¦ãã ã•ã„ã€‚

https://github.com/Alesion30/viteapp-template

â€» ä¸Šè¨˜ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ã€æœ¬è¨˜äº‹ã§ã¯è§¦ã‚Œã¦ã„ãªã„react-router-domã‚‚å°å…¥ã—ã¦ã„ã¾ã™ã€‚


# ä»Šå›ä½¿ç”¨ã—ã¦ã„ã‚‹æŠ€è¡“ã«ã¤ã„ã¦

- React v17.0.2
- TypeScript v4.4.4
- Vite v2.7.2
- TailwindCSS v3.0.2
- @storybook/react v6.4.9

## Viteã¨ã¯ï¼Ÿ

https://vitejs.dev/

Viteã¯ã€å¾“æ¥ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ï¼ˆreact-scriptsãƒ»VueCLIï¼‰ã«æ¯”ã¹ã¦ã€é«˜é€Ÿã§å‹•ä½œã™ã‚‹ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Reactã ã‘ã§ãªãã€Vueãƒ»Svelteãƒ»Preactãªã©ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚create-react-appã®ã‚ˆã†ã«ã€ç°¡å˜ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¢ãƒ—ãƒªã‚’ä½œæˆã§ãã¾ã™ã€‚

```shell
$ yarn create vite (ã‚¢ãƒ—ãƒªå) --template (ãƒ—ãƒªã‚»ãƒƒãƒˆå)
```

ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãƒ—ãƒªã‚»ãƒƒãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼ˆ2021å¹´12æœˆ17æ—¥ç¾åœ¨ï¼‰

| JavaScript | TypeScript |
| --- | --- |
| vanilla | vanilla-ts |
| vue | vue-ts |
| react | react-ts |
| preact | preact-ts |
| lit | lit-ts |
| svelte | svelte-ts |

## TailwindCSSã¨ã¯ï¼Ÿ

https://tailwindcss.com/

TailwindCSSã¯ã€CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä¸€ç¨®ã§ã€classã«ç›´æ¥`bg-white`ã‚„`font-bold`ãªã©ã‚’æŒ‡å®šã—ã¦ã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã—ã¦ã„ãã®ãŒç‰¹å¾´ã§ã™ã€‚

ä¸‹è¨˜ã®ã‚ˆã†ãªãƒœã‚¿ãƒ³ã‚’ä½œã‚ŠãŸã„ã¨ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«classã‚’æŒ‡å®šã—ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/689f81fdbe5f-20211217.png)

```html
<button
  class="
    bg-orange-500
    hover:bg-orange-600
    text-white
    px-4
    py-2
    rounded-lg
    shadow-lg
  "
>
  ãƒœã‚¿ãƒ³
</button>
```

## Storybookã¨ã¯ï¼Ÿ

https://storybook.js.org/

storybookã¯ã€UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¸€è¦§ã§è¡¨ç¤ºã§ãã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç”Ÿæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦storyã‚’è¨˜è¿°ã™ã‚‹ã ã‘ã§ã€ç°¡å˜ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¦‹ãŸç›®ã‚’ç¢ºèªã§ãã¾ã™ã€‚ã¾ãŸã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸Šã§propsã®åˆ¶å¾¡ã‚‚å¯èƒ½ã«ãªã£ã¦ãŠã‚Šã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§propsã«å¿œã˜ãŸUIã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/62ff5b23269b-20211217.gif)


# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆï¼ˆæœ¬é¡Œï¼‰

## å‹•ä½œç’°å¢ƒ

nodeã¨yarnã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã¨ã—ã¾ã™ã€‚

```shell
$ node -v
v16.0.0
$ yarn -v
1.22.11
```

## React+TypeScriptã®é››å½¢ã‚¢ãƒ—ãƒªã‚’ä½œæˆ

```shell
$ yarn create vite viteapp --template react-ts
$ cd viteapp
$ yarn
$ yarn dev
```

![](https://storage.googleapis.com/zenn-user-upload/b61eace17588-20211217.png)

## ESlintãƒ»Prettierã®å°å…¥

ESlintã¨ã¯ã€JavaScriptãƒ»TypeScriptã®ã‚³ãƒ¼ãƒ‰ã®èª¤ã‚ŠãŒãªã„ã‹ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
Prettierã¨ã¯ã€JavaScriptãƒ»TypeScriptã¯ã‚‚ã¡ã‚ã‚“ã®ã“ã¨ã€JSONã‚„HTMLãªã©ã•ã¾ã–ã¾ãªã‚³ãƒ¼ãƒ‰ã‚’ã„ã„æ„Ÿã˜ã«ã‚³ãƒ¼ãƒ‰æ•´å½¢ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼‰ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

https://eslint.org/

https://prettier.io/

ã¾ãŸã€ä»Šå›ã¯è¤‡æ•°ã®npmã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’1ã¤ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã•ã›ã‚‹ãŸã‚ã«ã€`npm-run-all`ã‚‚å°å…¥ã—ã¦ã„ã¾ã™ã€‚

https://www.npmjs.com/package/npm-run-all

```shell
$ yarn add -D prettier eslint eslint-config-prettier eslint-plugin-{import,prettier,react,react-hooks}
$ yarn add -D @typescript-eslint/{parser,eslint-plugin}
$ yarn add -D npm-run-all
$ touch .eslintrc .prettierrc .eslintignore .prettierignore
```

ä¸‹è¨˜ã¯ã€è‡ªåˆ†ãŒReactã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã„ã¤ã‚‚ä½¿ã£ã¦ã„ã‚‹eslintã¨prettierã®è¨­å®šã«ãªã‚Šã¾ã™ã€‚

```json:.eslintrc
{
  "root": true,
  "env": {
    "es6": true,
    "browser": true
  },
  "extends": [
    "eslint:recommended",
    "plugin:import/typescript",
    "plugin:react/recommended",
    "plugin:prettier/recommended"
  ],
  "plugins": ["@typescript-eslint", "import", "react", "react-hooks"],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "project": ["tsconfig.json"],
    "sourceType": "module",
    "ecmaFeatures": {
      "jsx": true
    }
  },
  "settings": {
    "react": {
      "version": "detect"
    }
  },
  "rules": {
    // Possible Errors
    "no-unexpected-multiline": "error",
    // Best Practices
    "class-methods-use-this": "off",
    "consistent-return": [
      "error",
      {
        "treatUndefinedAsUnspecified": true
      }
    ],
    "dot-location": ["error", "property"],
    "no-implicit-globals": "error",
    "no-invalid-this": "error",
    "no-param-reassign": [
      "error",
      {
        "props": false
      }
    ],
    "no-unmodified-loop-condition": "error",
    "no-useless-call": "error",
    "no-void": "off",
    "no-else-return": "off",
    "no-catch-shadow": "error",
    "no-label-var": "error",
    "no-shadow": "off",
    "no-undef-init": "error",
    "no-unused-expressions": [
      "error",
      {
        "allowShortCircuit": true
      }
    ],
    "no-unused-vars": 1,
    "no-undef": "off",
    "no-empty": "off",
    "sort-imports": 0,
    "import/order": [
      "error",
      {
        "groups": ["builtin", "external", "parent", "sibling", "index", "object", "type"],
        "pathGroups": [
          {
            "pattern": "@alias/**",
            "group": "parent",
            "position": "before"
          }
        ],
        "alphabetize": {
          "order": "asc"
        },
        "newlines-between": "always"
      }
    ],
    // ES2015
    "constructor-super": "error",
    "generator-star-spacing": ["error", "after"],
    "no-this-before-super": "error",
    "prefer-arrow-callback": [
      "error",
      {
        "allowNamedFunctions": true
      }
    ],
    "prefer-spread": "error",
    "prefer-template": "off",
    // React
    "react/no-danger": "error",
    "react/no-deprecated": "error",
    "react/no-did-mount-set-state": "error",
    "react/no-did-update-set-state": "error",
    "react/no-direct-mutation-state": "error",
    "react/no-is-mounted": "error",
    "react/no-set-state": "error",
    "react/no-string-refs": "error",
    "react/prefer-stateless-function": "error",
    "react/prop-types": "off",
    "react/self-closing-comp": "off",
    "react/destructuring-assignment": "off",
    "@typescript-eslint/no-unused-vars": "off",
    "react-hooks/rules-of-hooks": "error",
    "react/react-in-jsx-scope": "off"
  }
}
```

```json:.prettierrc
{
  "semi": false,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "useTabs": false,
  "jsxSingleQuote": true
}
```

```text:.eslintignore
node_modules
dist
dist-ssr
```

```text:.prettierignore
node_modules
dist
dist-ssr
```

vite.config.tsã«ã¦ã€eslintã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã®ã§ã€tsconfig.jsonã®includeã«`./vite.config.ts`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```diff json:tsconfig.json
{
- "include": ["./src"]
+ "include": ["./src", "./vite.config.ts"]
}
```

npmã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã€ESlintãƒ»Prettierã®å®Ÿè¡Œã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```diff json:package.json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
+   "fix": "npm-run-all -p fix:*",
+   "fix:eslint": "eslint . --ext .js,.ts,.jsx,.tsx --fix",
+   "fix:prettier": "prettier --write .",
+   "eslint": "eslint . --ext .js,.ts,.jsx,.tsx"
  },
}
```

```shell
# eslintã®å®Ÿè¡Œ
$ yarn eslint
# eslintã®å®Ÿè¡Œ(fixãƒ¢ãƒ¼ãƒ‰)
$ yarn fix:eslint
# prettierã®å®Ÿè¡Œ
$ yarn fix:prettier
# ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ï¼ˆfix:eslintã¨fix:prettierã‚’å®Ÿè¡Œï¼‰
$ yarn fix
```

## Huskyãƒ»lint-stagedã‚’å°å…¥

Huskyã¨ã¯ã€ã‚³ãƒŸãƒƒãƒˆæ™‚ã‚„ãƒ—ãƒƒã‚·ãƒ¥æ™‚ãªã©ã«ä½•ã‚‰ã‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
lint-stagedã¨ã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ä½•ã‚‰ã‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

https://typicode.github.io/husky/#/

https://www.npmjs.com/package/lint-staged

ä»Šå›ã¯ã“ã‚Œã‚‰ã‚’åˆã‚ã›ã¦ã€ã‚³ãƒŸãƒƒãƒˆæ™‚ã«ã€ESlintã¨Prettierã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```shell
$ yarn add -D husky lint-staged
$ npx husky-init && yarn install
```

`npx husky-init`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`.husky/pre-commit`ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚

package.jsonã«lint-stagedã®è¨­å®šã‚’è¿½åŠ ã—ã¾ã™ã€‚ä¸‹è¨˜ã¯ã€ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒ`jsãƒ»tsãƒ»jsxãƒ»tsx`ã®å ´åˆã¯ã€`eslint --fix && prettier --write`ã‚’å®Ÿè¡Œã—ã€`jsonãƒ»htmlãƒ»css`ã®å ´åˆã¯ã€`prettier --write`ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ä¾‹ã§ã™ã€‚

```diff json:package.json
{
+  "lint-staged": {
+    "*.{js,ts,jsx,tsx}": [
+      "eslint --fix",
+      "prettier --write"
+    ],
+    "*.{json,html,css}": [
+      "prettier --write"
+    ]
+  },
}
```

.husky/pre-commitã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã€ã‚³ãƒŸãƒƒãƒˆæ™‚ã«lint-stagedã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```diff shell:.husky/pre-commit
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

+ npx lint-staged
```

## Visual Studio Codeã®è¨­å®š

chromeã§ãƒ‡ãƒãƒƒã‚°ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚F5ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã€chromeãŒç«‹ã¡ä¸ŠãŒã‚Šã€vscodeä¸Šã§ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆãªã©ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```shell
$ touch .vscode/launch.json
```

```json:.vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "pwa-chrome",
      "request": "launch",
      "name": "Launch Chrome",
      "url": "http://localhost:3000",
      "webRoot": "${workspaceFolder}"
    }
  ]
}
```

ãƒ•ã‚¡ã‚¤ãƒ«ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºã®åˆ¶å¾¡ã‚‚ã“ã“ã§è¡Œã„ã¾ã™ã€‚`files.exclude`ã§ãƒ•ã‚©ãƒ«ãƒ€ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã¨ã€vscodeä¸Šã§ã¯ã€ãã®ãƒ•ã‚©ãƒ«ãƒ€ã¯éè¡¨ç¤ºã«ãªã‚Šã¾ã™ã€‚node_modulesã¨ã‹ã‚’é–²è¦§ã™ã‚‹ã‚±ãƒ¼ã‚¹ã¯ã»ã¨ã‚“ã©ãªã„ã¨æ€ã„ã¾ã™ã®ã§ã€éè¡¨ç¤ºã«ã—ãŸæ–¹ãŒè‰¯ã„ã§ã™ï¼ˆâ€»å€‹äººçš„ãªæ„è¦‹ã§ã™ï¼‰

```shell
$ touch .vscode/settings.json
```

```json:.vscode/settings.json
{
  "css.lint.unknownAtRules": "ignore",
  "files.exclude": {
    "node_modules": true,
    "dist": true,
    "yarn.lock": true,
  }
}
```

EditorConfigã‚‚è¨­å®šã—ã¦ãŠãã¾ã™ã€‚

```shell
$ touch .editorconfig
```

```text:.editorconfig
root = true

[*]

indent_style = space
indent_size = 2

end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true

[*.md]
trim_trailing_whitespace = false
```

## ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®è¨­å®š

ç›¸å¯¾ãƒ‘ã‚¹ã ã¨importæ–‡ãŒå†—é•·ã«ãªã‚‹ã®ã§ã€srcä»¥ä¸‹ã¯~ã§importã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ä¾‹) index.tsxã‹ã‚‰buttonã‚’èª­ã¿è¾¼ã‚€å ´åˆ
```
src/
|- components/
|  â””â”€ button.tsx
|- pages/
|  â””â”€ xxx/
|     â””â”€ index.tsx
```

```diff ts
- import Button from '../../components/button';
+ import Button from '~/components/button';
```

nodeã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¿…è¦ã«ãªã‚‹ã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```shell
$ yarn add -D @types/node
```

```diff ts:vite.config.ts
+ import { resolve } from 'path'
import react from '@vitejs/plugin-react'
import { defineConfig } from 'vite'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
+ resolve: {
+   alias: {
+     '~': resolve(__dirname, 'src'),
+   },
+ },
})
```

```diff json:tsconfig.json
{
  "compilerOptions": {
+    "baseUrl": ".",
+    "paths": {
+      "~/*": ["src/*"]
+    }
  }
}
```

## TailwindCSSã‚’å°å…¥

```shell
$ yarn add -D tailwindcss postcss autoprefixer
$ yarn tailwindcss init -p
```

`yarn tailwindcss init -p`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`postcss.config.js`ã¨`tailwind.config.js`ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚ãŸã ã€module.exportsã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€eslintã®å¯¾è±¡ã‹ã‚‰å¤–ã—ã¦ãŠãã¾ã™ã€‚

```diff text:.eslintignore
node_modules
dist
dist-ssr
+ postcss.config.js
+ tailwind.config.js
```

TailwindCSSã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã‚’è¡Œã†ãŸã‚ã«ã€`import 'tailwindcss/tailwind.css'`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```diff tsx:src/main.tsx
import React from 'react'
import ReactDOM from 'react-dom'

import '~/index.css'
+ import 'tailwindcss/tailwind.css'
import App from '~/App'

ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  document.getElementById('root')
)
```

ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚ºã‚’ç¸®å°ã™ã‚‹ãŸã‚ã«ã€purgeã®è¨­å®šã‚‚ã—ã¦ãŠãã¾ã™ã€‚

```diff js:tailwind.config.js
module.exports = {
- content: [],
+ content: ['index.html', 'src/**/*.{ts,tsx}'],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

æ—¢å­˜ã®App.tsxã‚’TailwindCSSã«ã‚ˆã‚‹ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ã§ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

```tsx:App.tsx
import { useState } from 'react'
import logo from '~/logo.svg'

const App: React.VFC = () => {
  const [count, setCount] = useState(0)

  return (
    <div className='text-center'>
      <header className='bg-slate-700 min-h-screen flex flex-col align-center justify-center text-3xl text-white'>
        <img src={logo} className='h-72' alt='logo' />
        <p className='text-4xl'>Hello Vite + React!</p>
        <p className='my-5'>
          count is:
          <button
            type='button'
            className='bg-gray-50 hover:bg-gray-100 text-black p-2 mx-2'
            onClick={() => setCount((count) => count + 1)}
          >
            {count}
          </button>
        </p>
        <p className='my-2'>
          Edit <code>App.tsx</code> and save to test HMR updates.
        </p>
        <p className='my-2'>
          <a className='text-cyan-300' href='https://reactjs.org' target='_blank' rel='noopener noreferrer'>
            Learn React
          </a>
          {' | '}
          <a
            className='text-cyan-300'
            href='https://vitejs.dev/guide/features.html'
            target='_blank'
            rel='noopener noreferrer'
          >
            Vite Docs
          </a>
        </p>
      </header>
    </div>
  )
}

export default App
```

![](https://storage.googleapis.com/zenn-user-upload/10875a202898-20211217.png)


## Storybookã‚’å°å…¥

```shell
$ npx sb init --builder webpack5
$ yarn add -D webpack@^5
```

:::message alert
ç­†è€…ã®ç’°å¢ƒã§ã¯ã€webpackã‚’å°å…¥ã™ã‚‹ã¨ã€`yarn build`ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€`babel__core`ã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚
:::

```shell
$ yarn add -D @types/babel__core
```

```shell:ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼
node_modules/@vitejs/plugin-react/dist/index.d.ts:1:36 - error TS7016: Could not find a declaration file for module '@babel/core'. '***/viteapp/node_modules/@vitejs/plugin-react/node_modules/@babel/core/lib/index.js' implicitly has an 'any' type.
  Try `npm i --save-dev @types/babel__core` if it exists or add a new declaration (.d.ts) file containing `declare module '@babel/core';`

1 import type { ParserOptions } from '@babel/core';
```

`npx sb init --builder webpack5`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€storybookã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã„ãã¤ã‹ä½œæˆã•ã‚Œã€npmã‚¹ã‚¯ãƒªãƒ—ãƒˆã«`storybook`ã¨`build-storybook`ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚

ã„ãã¤ã‹storyãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã‚‚è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ãŒã€`src/stories/Introduction.stories.mdx`ã¨`src/stories/assets`ä»¥å¤–ã¯å‰Šé™¤ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€StorybookãŒç«‹ã¡ä¸ŠãŒã‚Šã¾ã™ã€‚
```shell
$ yarn storybook
```

http://localhost:6006/ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/f00726c8a892-20211217.png)

storybookå´ã§ã‚‚åŒæ§˜ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®è¨­å®šã‚’ã—ã¾ã™ã€‚

```diff js:.storybook/main.js
+ const path = require('path')

module.exports = {
  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],
+ webpackFinal: async (config) => {
+   config.resolve.alias = {
+     ...config.resolve.alias,
+     '~': path.resolve(__dirname, '../src'),
+   }
+   return config
+ },
  framework: '@storybook/react',
  core: {
    builder: 'webpack5',
  },
}
```

TailwindCSSã«å¯¾å¿œã•ã›ã‚‹ãŸã‚ã®ã‚¢ãƒ‰ã‚ªãƒ³ã‚‚å°å…¥ã—ã¾ã™ã€‚

```shell
$ yarn add -D @storybook/addon-postcss
```

```diff js:.storybook/main.js
module.exports = {
+ addons: [
+   {
+     name: '@storybook/addon-postcss',
+     options: {
+       postcssLoaderOptions: {
+         implementation: require('postcss'),
+       },
+     },
+   },
+ ],
  webpackFinal: async (config) => {
    config.resolve.alias = {
      ...config.resolve.alias,
      '~': path.resolve(__dirname, '../src'),
    }
    return config
  },
  framework: '@storybook/react',
  core: {
    builder: 'webpack5',
  },
}
```

```diff js:.storybook/preview.js
+ import '../src/index.css'
+ import 'tailwindcss/tailwind.css'

export const parameters = {
  actions: { argTypesRegex: '^on[A-Z].*' },
  controls: {
    matchers: {
      color: /(background|color)$/i,
      date: /Date$/,
    },
  },
}
```


## ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…

App.tsxã®ãƒœã‚¿ãƒ³ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–ã—ã€Storybookä¸Šã§ç¢ºèªã—ã¦ã„ãã¾ã™ã€‚

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã™ã‚‹æ™‚ã«ã€classNameã‚’çµåˆã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª`clsx`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚

https://www.npmjs.com/package/clsx

```shell
$ touch src/components/button.tsx
```

```tsx:src/components/button.tsx
import clsx from 'clsx'

export type ButtonProps = {
  children: React.ReactChild
  onClick?: () => void
  className?: string
  full?: boolean
  rounded?: boolean
  outlined?: boolean
}

export const Button: React.VFC<ButtonProps> = ({
  children,
  onClick,
  className,
  full = false,
  rounded = false,
  outlined = false,
}) => {
  return (
    <button
      onClick={onClick}
      type='button'
      className={clsx(
        className,
        'px-4 py-2 border shadow-sm text-base font-medium',
        full ? 'w-full' : '',
        rounded ? 'rounded-full' : 'rounded-md',
        outlined
          ? 'border-orange-600 text-orange-600 bg-white hover:bg-orange-50'
          : 'border-transparent text-white bg-orange-600 hover:bg-orange-700'
      )}
    >
      {children}
    </button>
  )
}
```

App.tsxã®ãƒœã‚¿ãƒ³ã‚’å…ˆã»ã©ä½œæˆã—ãŸãƒœã‚¿ãƒ³ã«ç½®ãæ›ãˆã¾ã™ã€‚

```diff tsx:src/App.tsx
+ import { Button } from '~/components/button'

// JSXå†…ã®ãƒœã‚¿ãƒ³ã‚’å…ˆã»ã©ä½œæˆã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãã®ã¾ã¾ç½®ãæ›ãˆã¦ãã ã•ã„
- <button
-  type='button'
-  className='bg-gray-50 hover:bg-gray-100 text-black p-2 mx-2'
-  onClick={() => setCount((count) => count + 1)}
- >
-   {count}
- </button>

+ <Button outlined onClick={() => setCount((count) => count + 1)}>
+   {count}
+ </Button>
```

![](https://storage.googleapis.com/zenn-user-upload/5bb75fc50703-20211217.png)

å…ˆã»ã©ä½œæˆã—ãŸãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Storybookä¸Šã§è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã€storyãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

```shell
$ touch src/stories/components/button.stories.tsx
```

```tsx:src/stories/components/button.stories.tsx
import { ComponentMeta, ComponentStory } from '@storybook/react'

import { Button, ButtonProps } from '~/components/button'

export default {
  title: 'Components/Button',
  component: Button,
} as ComponentMeta<typeof Button>

const Template: ComponentStory<typeof Button> = (args) => <Button {...args} />
const defaultArgs: ButtonProps = {
  children: 'ãƒœã‚¿ãƒ³',
  full: false,
  rounded: false,
  outlined: false,
}

export const Default = Template.bind({})
Default.storyName = 'ãƒœã‚¿ãƒ³'
Default.args = defaultArgs
```

Storybookä¸Šã§ã€ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®UIã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸğŸ‰

![](https://storage.googleapis.com/zenn-user-upload/daea668c5b21-20211217.png)


# çµ‚ã‚ã‚Šã«

æœ¬è¨˜äº‹ã§ã¯ã€å€‹äººçš„ã«æ¿€æ¨ã—ã—ã¦ã„ã‚‹æ§‹æˆã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚Viteã®ãƒ“ãƒ«ãƒ‰é€Ÿåº¦ã«ã¯ä»Šå¹´ä¸€ç•ªæ„Ÿå‹•ã—ã¾ã—ãŸã€‚ä»Šå¾Œã¯ã€ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ™ãƒ¼ã‚¹ã«Recoilã‚„Amplifyãªã©ã‚’å°å…¥ã—ãŸè¨˜äº‹ã‚’æ›¸ã„ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

https://recoiljs.org/

https://aws.amazon.com/jp/amplify/

PS. åˆã‚ã¦Zennã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ãªã®ã§ã€æ‹™ã„æ–‡ç« ã§èª­ã¿ãšã‚‰ã‹ã£ãŸã‹ã¨æ€ã„ã¾ã™ã€ã€ã€‚æ™®æ®µã¯ã€Reactã‚„Flutterã‚’ä½¿ã£ã¦ã²ãã³ãã¨é–‹ç™ºã‚’æ¥½ã—ã‚“ã§ã„ã‚‹ãŸã ã®å­¦ç”Ÿãªã®ã§ã€ä»Šå¾Œã‚‚æ°—ãŒå‘ã„ãŸã¨ãã«ã€Reactã‚„Flutterã«ã¤ã„ã¦è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¦ã„ããŸã„ãªã¨æ€ã£ã¦ã„ã¾ã™ğŸ˜